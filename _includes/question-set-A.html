{% for block in site.data[include.file] %}

  <div class="question-item">
    {% if block.type == "info_block" %}
      <div class="info-block" style="text-align: center; margin: 2em 0;">
        {{ block.content }}
      </div>

    {% elsif block.type == "instruction_block" %}
      <h3 class="multi-part-title">Question {{ block.label }}</h3>
      <ol class="sub-question-list" style="list-style-type: lower-alpha;">
        {% for item in block.content_list %}
          <li>{{ item }}</li>
        {% endfor %}
      </ol>

    {% elsif block.type == "sub_question_block" %}
      <h3 class="multi-part-title">Question {{ block.parent_label }} (continued)</h3>
      <ul class="sub-question-list" style="list-style-type: none; padding-left: 0;">
        {% for sub_q in block.sub_questions %}
          <li>
            <div class="question-text">{{ sub_q.label }}</div>
            <details class="solution-details">
              <summary>Show Solution</summary>
              <div class="solution-content">
                <p>{{ sub_q.solution }}</p>
                {% if sub_q.answer %}<p><strong>Answer:</strong> {{ sub_q.answer }}</p>{% endif %}
                {% if sub_q.solution_image %}
                  <div class="solution-image">
                    <img src="{{ sub_q.solution_image.path | relative_url }}" alt="{{ sub_q.solution_image.alt }}">
                  </div>
                {% endif %}
              </div>
            </details>
          </li>
        {% endfor %}
      </ul>

    {% elsif block.type == "multi_part_question" or block.type == "matching_group" %}
      <h3 class="multi-part-title">Question {{ block.label }}: {{ block.question }}</h3>
      {% if block.shared_images %}
        <div class="shared-images-container">
          {% for img in block.shared_images %}
            <figure class="shared-image">
              <img src="{{ img.path | relative_url }}" alt="{{ img.alt }}">
              <figcaption>{{ img.label }}</figcaption>
            </figure>
          {% endfor %}
        </div>
      {% endif %}
      <ol class="sub-question-list" style="list-style-type: lower-alpha;">
        {% for part in block.parts %}
          <li>
            <div class="question-text">{{ part.text }}</div>
            <details class="solution-details">
              <summary>Show Solution</summary>
              <div class="solution-content">
                <p>{{ part.solution }}</p>
                {% if part.solution_image %}
                  <div class="solution-image">
                    <img src="{{ part.solution_image.path | relative_url }}" alt="{{ part.solution_image.alt }}">
                  </div>
                {% endif %}
                <p><strong>Answer:</strong> {{ part.answer }}</p>
              </div>
            </details>
          </li>
        {% endfor %}
      </ol>
    {% endif %}
  </div>

{% endfor %}
